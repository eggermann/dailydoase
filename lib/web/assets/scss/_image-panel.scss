@import "variables";
@import "mixins";

// Image panel component
.c-panel {
  scroll-snap-type: y mandatory;
  width: 100vw;
  height: $header-height;
  text-align: center;
  font-size: $font-size-xl;

  // List container
  &__list {
    @include flex-center;
    flex-wrap: wrap;
    padding: 0;
    gap: $spacing-sm;

    &__item {
      position: relative;
      will-change: transform;
      width: 100%;

      // Base styles
      img {
        width: 100%;
        height: auto;
        aspect-ratio: 1/1;
        display: block;
        object-fit: contain;
      }

      // Responsive sizes
      @include bp(md) {
        width: 24vw;
        padding: $spacing-sm;
      }

      @include bp(xxl) {
        width: 320px;
      }

      // States
      &--active {
        z-index: $z-overlay;
        position: relative;
      }

      // Hover effects only on medium screens and up
      @include bp(md) {
        @include on-hover {

          &:hover,
          &--active {
            @include hover-grow;
            filter: drop-shadow($shadow-overlay);
            z-index: $z-overlay;
          }
        }
      }

      // Info overlay
      &__info {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: $spacing-sm;
        opacity: 0;
        transition: opacity 0.2s ease;

        .active-image & {
          opacity: 1;
        }

        a {
          @include info-text;
          display: block;
          text-decoration: none;

          &:hover {
            text-decoration: underline;
          }
        }
      }
    }
  }
}

// Home view specific styles
.home .c-panel {
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;

  &__image {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  &__content {
    position: sticky;
    bottom: 0;
    left: 0;

    width: 100%;
    z-index: $z-overlay;
    backdrop-filter: blur(10px);

    padding: 0 0 2vh;

    &__info {
      @include info-text;
      font-size: 3vh;
      max-width: 80vw;
      margin: auto;
      transition: opacity 0.2s ease;
      mix-blend-mode: color-dodge;

      @include on-hover {

        &:hover,
        &--clicked {
          opacity: 0.1;
          cursor: none;
        }
      }
    }
  }
}

// List layout specific styles
body[layout="list"] {
  .c-panel {
    &__images {
      @include flex-column;
      align-items: center;
    }

    // Playing state
    &--playing {
      height: 100vh;
      width: 100%;
      @include flex-center;

      img {
        position: absolute;
        width: 100vw;
        height: 100vh;
        object-fit: contain;
        transition: opacity 0.2s ease;
        opacity: 0;

        &--active {
          opacity: 1;
        }
      }
    }

    // Content positioning
    &__content {
      position: fixed;
      bottom: 0;
      left: 10vw;
      width: 80vw;
      z-index: $z-overlay;

      &__info {
        @include info-text;
        font-size: $font-size-lg;
        transition: opacity 0.2s ease;

        @include on-hover {

          &:hover,
          &--clicked {
            opacity: 1;
          }
        }
      }
    }

    // Fullscreen handling
    &:fullscreen {
      .c-panel__images {
        overflow: auto;
        -webkit-overflow-scrolling: touch;

        img {
          object-fit: contain;
          max-height: 100vh;
        }
      }
    }
  }
}